<div class="container my-10 flex flex-col min-w-0 break-words w-full shadow-lg rounded-lg bg-blueGray-100 border-0"
*ngIf="!band.hiddenForm">
    <div class="rounded-t bg-white mb-0 px-6 py-6">
        <div class="text-center flex justify-between">
            <h6 class="text-blueGray-700 text-xl font-bold">Nuevo movimiento</h6>
        </div>
    </div> 
    <div class="flex-auto px-4 lg:px-10 py-10 pt-0">
        <form [formGroup]="movementForm" autocomplete="off">

            <app-pimp-xml-data 
            *ngIf="band.typeRegister === 'xml'"
            [setXmlData]="movementForm.value">
            </app-pimp-xml-data>

            <div class="flex flex-wrap" formGroupName="client">
                <div class="w-full lg:w-6/12 pr-4 mb-2">
                    <h5 class="text-blueGray-400 uppercase font-bold text-xs required">
                        Tipo de cliente
                    </h5>
                    <ng-select
                        [items]="catalogs.clientTypes"
                        [multiple]="false"
                        [closeOnSelect]="true"
                        bindLabel="name"
                        bindValue="name" 
                        name="fclientType"
                        placeholder="Selecciona un tipo de cliente"
                        notFoundText="No se encontraron tipos de cliente."
                        formControlName="type"
                        class="border-0 bg-white rounded shadow mt-1"
                        autocomplete="false"
                            >
                    </ng-select>

                    <div *ngIf="movementForm.controls['client'].controls['type'].invalid && (movementForm.controls['client'].controls['type'].dirty || movementForm.controls['client'].controls['type'].touched) || band.submit">
                        <span class="text-sm text-red-500 mt-1" *ngIf="movementForm.controls['client'].controls['type'].errors?.required">El tipo de cliente es requerido</span>
                    </div>
                </div>
            </div>

            <div class="flex flex-wrap" formGroupName="invoice">
                <div class="w-full lg:w-6/12 pr-4 mb-2">
                    <h5 class="text-blueGray-400 uppercase font-bold text-xs required">
                        Tipo de facturaci贸n
                    </h5>
                    <ng-select
                        [items]="catalogs.billingTypes"
                        [multiple]="false"
                        [closeOnSelect]="true"
                        bindLabel="name"
                        bindValue="name" 
                        name="fbillingType"
                        placeholder="Selecciona un tipo de facturaci贸n"
                        notFoundText="No se encontraron tipos de facturaci贸n."
                        formControlName="typeInvoice"
                        class="border-0 bg-white rounded shadow mt-1"
                        autocomplete="false"
                            >
                    </ng-select>

                    <div *ngIf="movementForm.controls['invoice'].controls['typeInvoice'].invalid && (movementForm.controls['invoice'].controls['typeInvoice'].dirty || movementForm.controls['invoice'].controls['typeInvoice'].touched) || band.submit">
                        <span class="text-sm text-red-500 mt-1" *ngIf="movementForm.controls['invoice'].controls['typeInvoice'].errors?.required">El tipo de facturaci贸n es requerido</span>
                    </div>
                </div>
                <div class="w-full lg:w-6/12 mb-2">
                    <h5 class="text-blueGray-400 uppercase font-bold text-xs required">
                        Movimiento
                    </h5>
                    <input #username type="text"
                        class="mt-1 border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                        formControlName="nameMovement" placeholder="Ej. (ISR, IVA, Banco, etc)"  />

                    <div *ngIf="movementForm.controls['invoice'].controls['nameMovement'].invalid && (movementForm.controls['invoice'].controls['nameMovement'].dirty || movementForm.controls['invoice'].controls['nameMovement'].touched) || band.submit">
                        <span class="text-sm text-red-500 mt-1" *ngIf="movementForm.controls['invoice'].controls['nameMovement'].errors?.required">El movimiento es requerido</span>
                    </div>
                </div>
            </div>

            <app-upload-documents 
            (sendFiles)="SetFiles($event)"
            (sendDeleteFile)="DeleteFile($event)">
            </app-upload-documents>

            <hr class="mt-6 border-b-1 border-blueGray-300">
            <div class="flex justify-end mt-10">
                <button class="text-blueGray-500 bg-transparent border border-solid border-blueGray-500 hover:bg-blueGray-500 hover:text-white active:bg-blueGray-600 font-bold uppercase text-xs px-4 py-2 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150" type="button"
                routerLink="/app/archive">
                    <i class="fas fa-arrow-left"></i> Regresar
                </button>
                <button type="button" (click)="SaveMovement()" class="bg-emerald-500 text-white active:bg-red-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150 ml-5">
                    <i class="fas fa-save"></i> Guardar
                </button>
            </div>
        </form>
    </div>
</div>

<app-modal-type-movement #modalChooseType (sendXMLData)="SetXMLData($event)"></app-modal-type-movement>
